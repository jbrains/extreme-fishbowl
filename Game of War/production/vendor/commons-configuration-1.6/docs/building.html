<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Commons Configuration - Building</title><style type="text/css" media="all">
          @import url("./style/maven-base.css");
          
			    @import url("./style/maven-theme.css");@import url("./style/project.css");</style><link rel="stylesheet" href="./style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Oliver Heger"></meta><meta name="email" content="oheger@apache.org"></meta></head><body class="composite"><div id="banner"><a href="http://commons.apache.org/" id="organizationLogo"><img alt="The Apache Software Foundation" src="http://commons.apache.org/images/logo.png"></img></a><a href="http://commons.apache.org/configuration/" id="projectLogo"><img alt="Commons Configuration" src="./images/logo.png"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">
                	Last published: 19 December 2008
                  | Doc for 1.6</div><div class="xright">
        
        <a href="http://commons.apache.org/" class="externalLink" title="External Link">Apache Commons</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuConfiguration"><h5>Configuration</h5><ul><li class="none"><a href="index.html">Home</a></li><li class="none"><a href="http://commons.apache.org/downloads/download_configuration.cgi" class="externalLink" title="External Link">Download</a></li><li class="none"><a href="changes-report.html">Release History</a></li><li class="none"><a href="userguide/user_guide.html">User's Guide</a></li><li class="none"><a href="userguide-1.2/index.html">Howtos (1.2 release)</a></li><li class="none"><a href="dependencies.html">Runtime Dependencies</a></li><li class="none"><a href="apidocs/index.html">Javadoc (current release)</a></li><li class="none"><a href="javadocarchive.html">Javadoc (old releases)</a></li></ul></div><div id="menuDevelopment"><h5>Development</h5><ul><li class="none"><strong><a href="building.html">Building</a></strong></li><li class="none"><a href="tasks-report.html">Roadmap</a></li><li class="none"><a href="issue-tracking.html">Issue Tracking</a></li><li class="none"><a href="http://svn.apache.org/repos/asf/commons/proper/configuration/" class="externalLink" title="External Link">SVN</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="index.html">About Commons Configuration</a></li><li class="none"><a href="downloads.html">Downloads</a></li><li class="collapsed"><a href="project-info.html">Project Info</a></li><li class="collapsed"><a href="maven-reports.html">Project Reports</a></li><li class="none"><a href="http://commons.apache.org/charter.html" class="externalLink" title="External Link">Development Process</a></li></ul></div><div id="menuCommons"><h5>Commons</h5><ul><li class="none"><a href="http://commons.apache.org/" class="externalLink" title="External Link">Home</a></li><li class="collapsed"><a href="http://commons.apache.org/components.html" class="externalLink" title="External Link">Components</a></li><li class="collapsed"><a href="http://commons.apache.org/sandbox/index.html" class="externalLink" title="External Link">Sandbox</a></li><li class="collapsed"><a href="http://commons.apache.org/dormant/index.html" class="externalLink" title="External Link">Dormant</a></li><li class="none"><a href="http://commons.apache.org/volunteering.html" class="externalLink" title="External Link">Volunteering</a></li><li class="none"><a href="http://commons.apache.org/patches.html" class="externalLink" title="External Link">Contributing Patches</a></li><li class="none"><a href="http://commons.apache.org/building.html" class="externalLink" title="External Link">Building Components</a></li><li class="none"><a href="http://commons.apache.org/releases/index.html" class="externalLink" title="External Link">Releasing Components</a></li><li class="none"><a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="External Link">Wiki</a></li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="./images/logos/maven-feather.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Overview"></a><h2>Overview</h2><p>
            Commons Configuration can be built using
            <a href="http://maven.apache.org" class="externalLink" title="External Link">maven</a> or
            <a href="http://ant.apache.org" class="externalLink" title="External Link">ant</a>. While building on a JDK
            1.4 and higher should be no problem for JDK 1.3 (which is the
            minimum required JDK) some preparations are necessary. This is
            covered in full detail in the Building with JDK 1.3 section below.
          </p></div><div class="section"><a name="Maven_Goals"></a><h2>Maven Goals</h2><p>
            Maven 1.x is our recommended build tool. To build the Configuration
            jar file, change into the directory where you unzipped the source
            distribution or where you checked out the sources from SVN and run
            "maven jar". The result will be in the (newly created) "target"
            subdirectory.
          </p><p>
            To build the Javadocs, run "maven javadoc".
            The result will be in "target/docs/apidocs".
          </p><p>
            To build the full website, run "maven site".
            The result will be in "target/docs".
          </p></div><div class="section"><a name="Ant_Goals"></a><h2>Ant Goals</h2><p>
            To build a jar file, change into Configuration's root directory and run "ant jar".
            The result will be in the "target" subdirectory.
          </p><p>
            To build the Javadocs, run "ant javadoc".
            The result will be in "target/docs/apidocs".
          </p></div><div class="section"><a name="Building_with_JDK_1_3"></a><h2>Building with JDK 1.3</h2><p>
            If you want to build Commons Configuration on a JDK 1.3, you will
            face two problems:
          </p><p>
            The first problem is that JDK 1.3 does not contain the JDBC 2.0
            standard extensions, which are used by the
            <code>DatabaseConfiguration</code> class. Unfortunately, due to legal
            issues, the jar file containing these extensions cannot be
            distributed through the typical maven repositories and automatically
            downloaded. To resolve this issue perform the following steps:
          </p><p>
            <ul>
              <li>Download the JDBC 2.0 Optional Package from
              <a href="http://java.sun.com/products/jdbc/download.html" class="externalLink" title="External Link">
              http://java.sun.com/products/jdbc/download.html</a> and store
              the jdbc-stdext-2.0.jar somewhere on your hard disk.</li>
              <li>Create a <code>build.properties</code> file in the Configuration
              root directory that must contain the following line:<br></br>
              <code>dependency.jdbc = <em>&lt;path to jdbc-stdext-2.0.jar&gt;</em></code></li>
            </ul>
          </p><p>
            The second problem is related to a test class for
            <code>DatabaseConfiguration</code> that makes use of
            <a href="http://hsqldb.org" class="externalLink" title="External Link">hsqldb</a>. At the time of writing this, the
            hsqldb jar files distributed on the ibiblio maven repository only
            support JDK 1.4 and higher. This makes the tests fail with a class
            not found exception for <code>java.sql.SavePoint</code>. There are
            some workarounds for this problem:
          </p><p>
            <ul>
              <li>Disable the failing test class
              (<code>org.apache.commons.configuration.TestDatabaseConfiguration</code>)
              in the build script. For instance if building with maven, this can
              be done with an <code>excludes</code> element in the
              <code>unitTest</code> section of <code>project.xml</code>.</li>
              <li>It is possible to download a hsqldb distribution and recompile
              on JDK 1.3. The jar that is created this way will cause no
              problems on a JDK 1.3.</li>
              <li>Another solution would be to run maven on a JDK 1.4 or higher and use
              the <code>maven.compile.executable</code> property to point to
              a JDK 1.3 compiler. This will ensure that the classes are compiled
              on JDK 1.3, but the tests are run on the JDK maven is executing.
              Refer to the documentation of the
              <a href="http://maven.apache.org/maven-1.x/reference/plugins/java/" class="externalLink" title="External Link">
              Maven Java Plug-in</a> for further information.</li>
            </ul>
          </p><p>
            If these problems are solved, the build can be performed as
            described above.
          </p></div><div class="section"><a name="Setting_custom_build_parameters"></a><h2>Setting custom build parameters</h2><p>
            Both the maven and the ant build script support a file called
            <code>build.properties</code> that can contain custom properties
            definitions. If this file exists in the project's root directory,
            it will be read and the properties it defines will be added to the
            running build script. This mechanism allows for customizing the
            build process without the need of changing the main build scripts.
          </p><p>
            One use case for setting custom build properties would be to build
            for a specific JDK version: If you build the jar on a JDK 1.5 for
            instance, the classes won't be compatible with older JDK versions.
            To enforce compatibility you can create a <code>build.properties</code>
            file containing the following maven specific settings:
          </p>
    <div class="source"><pre>
maven.compile.source = 1.3
maven.compile.target = 1.3
</pre></div>
  </div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2001-2008, The Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>